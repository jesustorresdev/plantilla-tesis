%%
%% main.tex - Memoria de la tesis
%%
%%   Copyright 2009-2010 Jesús Torres <jmtorres@ull.es>
%%
%% Esta obra está bajo licencia Creative Commons Reconocimiento 3.0 Unported
%%
\documentclass[b5paper,twoside,11pt,DIV=calc]{scrbook}
\KOMAoptions{open=right,cleardoublepage=empty,headings=big,headsepline=true,
  chapterprefix,bibliography=totoc,captions=tableheading,numbers=enddot,
  draft=false}
\addtocounter{tocdepth}{-1} % No mostrar las subsecciones en las TOC

% Idioma
% http://www.tex-tipografia.com/spanish2.html
\usepackage[spanish,es-noenumerate,es-tabla]{babel}
\usepackage{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}

\renewcommand*{\spanishcontentsname}{\'Indice}

% Fuentes
\usepackage{mathpazo} % Texto con "Palatino" + fuente matemática "Pazo"
\renewcommand{\sfdefault}{uop} % "Optima" como fuente sans serif
\setkomafont{pagehead}{\sffamily\small}
\setkomafont{pagenumber}{\usekomafont{pagehead}}
\setkomafont{caption}{\sffamily\small}
\addtokomafont{captionlabel}{\bfseries}

% Interlineado
\usepackage{setspace}
\onehalfspacing

\recalctypearea % Recalcular las áreas de los bloques de texto
% \usepackage[a4,center,frame]{crop} % Marcas de corte
% \usepackage{showframe} % Marcar los márgenes

% Espacio anterior y posterior al título de cada capítulo
\renewcommand*{\chapterheadstartvskip}{\vspace*{4.50\baselineskip}}
\addtokomafont{chapter}{\fontsize{26}{26}\selectfont}
%\renewcommand*{\chapterheadendvskip}{\vspace{2.25\baselineskip}}

% Listas
\spanishsignitems

% Notas al pié
\usepackage[multiple]{footmisc}
\deffootnote{1.25em}{1.75em}{\textsuperscript{\thefootnotemark}}

% Separador del título de figuras y tablas
\renewcommand*{\figureformat}{\figurename~\thefigure}
\renewcommand*{\tableformat}{\tablename~\thetable}
\renewcommand*{\captionformat}{\autodot\enskip}
\setcapindent{0em}

% Subfiguras
\usepackage[caption=false, % Usar los captions de KOMA-script
            labelformat=simple]{subfig}
\renewcommand\thesubfigure{(\alph{subfigure})} % Paréntesis en las subfiguras
\renewcommand\thesubtable{(\alph{subtable})} % Paréntesis en las subtablas

% Tablas
\usepackage{longtable} % notación
\usepackage{tabularx}
\usepackage{booktabs}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{R}{>{$}r<{$}}
\renewcommand*{\arraystretch}{1.1} % Distancia entre filas

% Comando para ayudar a formatear los nombres de los programas
\usepackage{xspace}
\newcommand*{\program}[1]{{\ttfamily #1}}
\newcommand{\Blender}{\program{Blender}\xspace}
\newcommand{\Matlab}{\program{MATLAB}\xspace}
\newcommand{\Makehuman}{\program{MakeHuman}\xspace}

% Listados de código
\usepackage{listings}
\lstset{basicstyle=\small}
\newcommand*{\lstCppMakeShortInline}[1]
  {\lstMakeShortInline[language=C++,basicstyle=\normalsize\ttfamily]#1}
\newcommand*{\lstMatlabMakeShortInline}[1]
  {\lstMakeShortInline[language=MATLAB,basicstyle=\normalsize\ttfamily]#1}
\newcommand*{\lstPythonMakeShortInline}[1]
  {\lstMakeShortInline[language=Python,basicstyle=\normalsize\ttfamily]#1}

% Algoritmos
\usepackage{algorithmic}
\usepackage{algorithm}

% Gráficos
\usepackage{tikz}
\usepackage{graphicx}
\newlength{\figuresheight}
\setlength{\figuresheight}{7cm}
\setkeys{Gin}{totalheight=\figuresheight,keepaspectratio=true}
\graphicspath{{./images/bmps/}{./images/vects/}}
\usepackage{ifpdf}
\ifpdf
  \DeclareGraphicsExtensions{.pdf,.mps,.png,.jpg}
\else
  \DeclareGraphicsExtensions{.eps,.mps}
\fi

% Bibliografía
% Citas ordenadas en el orden en que aparecen en la bibliografía (sort).
% % En la primera cita aparecen los nombres de todos los autores (longnamesfirst)
% % \usepackage[longnamesfirst,sort]{natbib}
\usepackage[sort]{natbib}
\bibliographystyle{abbrvnat}
\bibpunct{(}{)}{;}{a}{,}{,}
\setbibpreamble{Las siguientes referencias bibliográficas se presentan en orden
alfabético por autor. Las referencias con más de un autor aparecen ordenadas
en base al primero de los mismos.\par\bigskip}

% Referencias
\usepackage[spanish]{varioref}
\labelformat{enumi}{(#1)}
\labelformat{equation}{(#1)}

% PDFTeX
\pdfimageresolution=300
\pdfcompresslevel=9
\pdfadjustspacing=1 % Asegurar la compatibilidad con la salida normal de TeX
\usepackage[
  bookmarksnumbered=true,
  pdfborder={0 0 0},
  pdfdisplaydoctitle=true,
  pdftitle={T\'itulo de la tesis},
  pdfauthor={Autor de la tesis},
  pdfsubject={Memoria de tesis doctoral},
  pdfkeywords={memoria, tesis, plantilla, latex}
  ]{hyperref}

% Para las páginas apaisadas
% \usepackage{lscape}
% \usepackage{pdflscape}
\usepackage{rotfloat} % TODO: Páginas apaisadas en el PDF

% Matemáticas
\usepackage{amsmath}
\unaccentedoperators
\newcommand{\relphantom}[1]{\mathrel{\phantom{#1}}}
\newcommand{\func}[1]{\mathnormal{#1}}
\newcommand{\mat}[1]{\boldsymbol{\mathrm{\MakeUppercase{#1}}}}
\newcommand{\spc}[1]{\mathbb{#1}}
\newcommand{\dist}[1]{\mathcal{#1}}
\renewcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\UPSIGMA}{\boldsymbol{\Sigma}}

\usepackage[printonlyused,withpage]{acronym}
\usepackage{local}

% Estructura del documento
\begin{document}

\frontmatter
\label{portada}\pdfbookmark{Tesis doctoral}{portada}
\titlehead{\includegraphics[height=1cm]{unilogo} \\
  \vskip 1em
  Centro de la Universidad \\
  Departamento de la Universidad}
\subject{Tesis doctoral}
\title{Título de la tesis}
\author{Autor de la tesis}
\date{2010}
\maketitle

\input{certificado}
\input{dedicatoria}
\input{agradecimientos}

\cleardoublepage
\pdfbookmark{\spanishcontentsname}{tableofcontents}
\tableofcontents

\cleardoublepage
\pdfbookmark{\listtablename}{listoftables}
\listoftables

\cleardoublepage
\pdfbookmark{\listfigurename}{listoffigures}
\listoffigures

\cleardoublepage
\pdfbookmark{\listalgorithmname}{listofalgorithms}
\listofalgorithms

\input{acronimos}
\input{notacion}

\input{introduccion}

\mainmatter
\input{capitulo01}
%\input{capitulo02}
%\input{capitulo03}
%\acresetall

\input{conclusiones}

\appendix
\input{apendiceA}
%\input{apendiceB}

\backmatter
\bibliography{references}

\end{document}
